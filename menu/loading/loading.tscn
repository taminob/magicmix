[gd_scene load_steps=12 format=2]

[ext_resource path="res://menu/loading/loading_bar_over.png" type="Texture" id=1]
[ext_resource path="res://menu/loading/loading.gd" type="Script" id=2]
[ext_resource path="res://menu/loading/loading_bar_progress.png" type="Texture" id=3]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;

uniform sampler2D noise;
uniform float noise_scale = 1.;
uniform float noise_lod = 1.;
uniform vec4 base_modifier = vec4(0.5, 0.2, 0.2, 1.);
uniform vec4 noise_modifier = vec4(1., 0.5, 0.6, 1.);
uniform float speed_scale = 0.2;

void fragment()
{
	vec4 base = texture(TEXTURE, UV);
	vec2 uv = UV * noise_scale;
	uv.y -= fract(TIME * speed_scale);
	vec4 noise_result = textureLod(noise, uv, noise_lod);
	COLOR = mix(base * base_modifier, noise_result * noise_modifier, 0.3);
}"

[sub_resource type="OpenSimplexNoise" id=2]

[sub_resource type="NoiseTexture" id=3]
width = 1024
height = 1024
seamless = true
noise = SubResource( 2 )

[sub_resource type="ShaderMaterial" id=4]
shader = SubResource( 1 )
shader_param/noise_scale = 1.0
shader_param/noise_lod = 1.0
shader_param/base_modifier = Plane( 0.5, 0.2, 0.2, 1 )
shader_param/noise_modifier = Plane( 1, 0.5, 0.6, 1 )
shader_param/speed_scale = 0.2
shader_param/noise = SubResource( 3 )

[sub_resource type="OpenSimplexNoise" id=5]

[sub_resource type="NoiseTexture" id=6]
width = 1920
height = 1080
noise = SubResource( 5 )

[sub_resource type="OpenSimplexNoise" id=7]

[sub_resource type="NoiseTexture" id=8]
width = 2048
seamless = true
noise = SubResource( 7 )

[node name="loading" type="Control"]
pause_mode = 2
anchor_right = 1.0
anchor_bottom = 1.0
script = ExtResource( 2 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="background" type="TextureRect" parent="."]
material = SubResource( 4 )
anchor_right = 1.0
anchor_bottom = 1.0
texture = SubResource( 6 )
expand = true
stretch_mode = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="progress" type="TextureProgress" parent="."]
anchor_top = 0.8
anchor_right = 1.0
anchor_bottom = 0.9
max_value = 1.0
step = 0.01
value = 0.4
texture_under = SubResource( 8 )
texture_over = ExtResource( 1 )
texture_progress = ExtResource( 3 )
tint_progress = Color( 0, 0, 0, 1 )
nine_patch_stretch = true
__meta__ = {
"_edit_use_anchors_": false
}
