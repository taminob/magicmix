[gd_scene load_steps=14 format=2]

[sub_resource type="ParticlesMaterial" id=1]
flag_rotate_y = true
direction = Vector3( 0, 0, 0 )
gravity = Vector3( 0, 0, 0 )
angular_velocity = 10.0

[sub_resource type="SphereShape" id=2]
radius = 0.5

[sub_resource type="ParticlesMaterial" id=3]
trail_divisor = 5
emission_shape = 1
emission_sphere_radius = 0.3
direction = Vector3( 0, 1, 0 )
spread = 5.0
gravity = Vector3( 0, 0, 0 )
initial_velocity = 1.0

[sub_resource type="Shader" id=4]
code = "shader_type spatial;
render_mode blend_mix;

uniform vec4 base_color = vec4(0.37, 0., 0., 0.8);

void vertex()
{
	COLOR = base_color;
}

void fragment()
{
	ALBEDO = COLOR.rgb;
	EMISSION = ALBEDO * 20.;
	ALPHA = smoothstep(0.0, 0.9, COLOR.a);
}"

[sub_resource type="ShaderMaterial" id=5]
shader = SubResource( 4 )
shader_param/base_color = Plane( 0.5, 0.3, 0, 0.8 )

[sub_resource type="SphereMesh" id=6]
material = SubResource( 5 )
radius = 0.01
height = 0.04

[sub_resource type="ParticlesMaterial" id=7]
trail_divisor = 3
emission_shape = 1
emission_sphere_radius = 0.5
direction = Vector3( 0, 1, 0 )
spread = 15.0
gravity = Vector3( 0, 0, 0 )
initial_velocity = 1.0
angular_velocity = 1.0

[sub_resource type="SpatialMaterial" id=8]
albedo_color = Color( 0.392157, 0, 0, 1 )

[sub_resource type="SphereMesh" id=9]
material = SubResource( 8 )
radius = 0.02
height = 0.04

[sub_resource type="ParticlesMaterial" id=10]
trail_divisor = 3
emission_shape = 1
emission_sphere_radius = 0.5
direction = Vector3( 0, 1, 0 )
spread = 10.0
gravity = Vector3( 0, 0, 0 )
initial_velocity = 1.0

[sub_resource type="Shader" id=11]
code = "shader_type spatial;
render_mode blend_mix;

uniform vec4 base_color = vec4(0.37, 0., 0., 0.8);

void vertex()
{
	COLOR = base_color;
}

void fragment()
{
	ALBEDO = COLOR.rgb;
	EMISSION = ALBEDO * 20.;
	ALPHA = smoothstep(0.0, 0.9, COLOR.a);
}"

[sub_resource type="ShaderMaterial" id=12]
shader = SubResource( 11 )
shader_param/base_color = Plane( 0.37, 0, 0, 0.8 )

[sub_resource type="SphereMesh" id=13]
material = SubResource( 12 )
radius = 0.01
height = 0.02

[node name="fire" type="Area"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0 )
collision_layer = 64
collision_mask = 24

[node name="sphere" type="CSGSphere" parent="."]
visible = false
radius = 0.5
material = SubResource( 1 )

[node name="collision" type="CollisionShape" parent="."]
shape = SubResource( 2 )

[node name="particles" type="Particles" parent="."]
amount = 100
lifetime = 0.4
visibility_aabb = AABB( -0.337496, -0.29315, -0.372307, 0.682095, 1.0173, 0.781276 )
process_material = SubResource( 3 )
draw_pass_1 = SubResource( 6 )

[node name="particles2" type="Particles" parent="."]
amount = 200
lifetime = 0.3
visibility_aabb = AABB( -0.561712, -0.528422, -0.646344, 1.10737, 1.34839, 1.27542 )
process_material = SubResource( 7 )
draw_pass_1 = SubResource( 9 )

[node name="particles3" type="Particles" parent="."]
amount = 500
lifetime = 0.4
visibility_aabb = AABB( -0.528495, -0.507156, -0.664096, 1.05789, 1.40856, 1.32317 )
process_material = SubResource( 10 )
draw_pass_1 = SubResource( 13 )
